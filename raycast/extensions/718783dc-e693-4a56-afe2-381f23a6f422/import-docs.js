"use strict";var D=Object.create;var w=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var F=(e,t)=>{for(var n in t)w(e,n,{get:t[n],enumerable:!0})},R=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of z(t))!N.call(e,c)&&c!==n&&w(e,c,{get:()=>t[c],enumerable:!(u=W(t,c))||u.enumerable});return e};var _=(e,t,n)=>(n=e!=null?D(V(e)):{},R(t||!e||!e.__esModule?w(n,"default",{value:e,enumerable:!0}):n,e)),j=e=>R(w({},"__esModule",{value:!0}),e);var B={};F(B,{default:()=>C,saveDocs:()=>I});module.exports=j(B);var i=require("@raycast/api");var a=_(require("react")),s=require("@raycast/api");var P=require("react/jsx-runtime");function T(e){let t=(0,a.useRef)(e);return t.current=e,t}function E(e,t){if(e){if(typeof e=="function")return e(t);if(e==="required"){let n=typeof t<"u"&&t!==null;if(n)switch(typeof t){case"string":n=t.length>0;break;case"object":Array.isArray(t)?n=t.length>0:t instanceof Date&&(n=t.getTime()>0);break;default:break}if(!n)return"The item is required"}}}function U(e){let{onSubmit:t,validation:n,initialValues:u={}}=e,[c,d]=(0,a.useState)(u),[x,b]=(0,a.useState)({}),h=(0,a.useRef)({}),$=T(n||{}),A=T(t),v=(0,a.useCallback)(o=>{h.current[o]?.focus()},[h]),O=(0,a.useCallback)(async o=>{let r=!1;for(let[p,f]of Object.entries($.current)){let m=E(f,o[p]);m&&(r||(r={},v(p)),r[p]=m)}if(r)return b(r),!1;let l=await A.current(o);return typeof l=="boolean"?l:!0},[$,A,v]),y=(0,a.useCallback)((o,r)=>{b(l=>({...l,[o]:r}))},[b]),S=(0,a.useCallback)(function(o,r){d(l=>({...l,[o]:typeof r=="function"?r(l[o]):r}))},[d]),L=(0,a.useMemo)(()=>new Proxy({},{get(o,r){let l=$.current[r],p=c[r];return{onChange(f){x[r]&&(E(l,f)||y(r,void 0)),S(r,f)},onBlur(f){let m=E(l,f.target.value);m&&y(r,m)},error:x[r],id:r,value:typeof p>"u"?null:p,ref:f=>{h.current[r]=f}}}}),[x,$,y,c,h,S]),M=(0,a.useCallback)(o=>{b({}),Object.entries(h.current).forEach(([r,l])=>{o?.[r]||l?.reset()}),o&&d(o)},[d,b,h]);return{handleSubmit:O,setValidationError:y,setValue:S,values:c,itemProps:L,focus:v,reset:M}}var k=_(require("fs")),g=require("react/jsx-runtime");function C(){let{handleSubmit:e,itemProps:t}=U({onSubmit(n){let u=k.default.readFileSync(n.file[0],"utf8"),c=JSON.parse(u);I(JSON.stringify(c)),(0,i.showToast)({style:i.Toast.Style.Success,title:"Successfully imported documentation",message:`${n.file} account created`})},validation:{file:n=>{let u=n?n[0]:"";if(u)if(k.default.existsSync(u)){if(!u.endsWith(".json"))return"Must be JSON file"}else return"File does not exist";else return"The item is required";let c=k.default.readFileSync(u,"utf8"),d=JSON.parse(c);if(!Object.keys(d).includes("docs"))return"Must use top-level 'docs' key"}}});return(0,g.jsx)(i.Form,{actions:(0,g.jsx)(i.ActionPanel,{children:(0,g.jsx)(i.Action.SubmitForm,{title:"Import",onSubmit:e})}),children:(0,g.jsx)(i.Form.FilePicker,{allowMultipleSelection:!1,info:"Import a JSON file from the DevDocs.io Settings page to set your preferred documentations.",...t.file})})}async function I(e){await i.LocalStorage.setItem("docs",JSON.stringify(e)),(0,i.popToRoot)()}0&&(module.exports={saveDocs});
