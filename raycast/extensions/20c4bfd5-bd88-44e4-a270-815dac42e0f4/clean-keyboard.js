"use strict";var h=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var D=(e,n)=>{for(var s in n)h(e,s,{get:n[s],enumerable:!0})},E=(e,n,s,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of x(n))!j.call(e,i)&&i!==s&&h(e,i,{get:()=>n[i],enumerable:!(l=I(n,i))||l.enumerable});return e};var F=e=>E(h({},"__esModule",{value:!0}),e);var C={};D(C,{default:()=>A});module.exports=F(C);var o=require("@raycast/api"),f=require("react");var w=require("@raycast/api"),g=require("path"),k=require("fs/promises"),S=require("child_process");async function b(e,...n){if(process.platform==="win32")return Promise.reject(new Error("Swift functions are not supported on Windows"));let s=(0,g.join)(w.environment.assetsPath,"compiled_raycast_swift/MyExecutable");return await(0,k.chmod)(s,"755"),new Promise((l,i)=>{let y=[e];for(let a of n)try{y.push(JSON.stringify(a,(c,m)=>m===void 0?null:m))}catch(c){i(new p("Failed to serialize input to JSON: "+c.message));return}let d=(0,S.spawn)(s,y),t=[],u=[];d.stdout?.on("data",a=>{t.push(a.toString())}),d.stderr?.on("data",a=>{u.push(a.toString())}),d.on("exit",a=>{if(a===0)try{let c=t.join("").trim();c.length!=0?l(JSON.parse(c)):l(null)}catch(c){let m=new p("Failed to deserialize result from JSON: "+c.message);m.stdout=t.join("").trim(),m.stderr=u.join("").trim(),i(m)}else{let c=new p(u.join("").trim()||t.join("").trim()||"Could not get any data");c.stdout=t.join("").trim(),c.stderr=u.join("").trim(),i(c)}}),d.on("error",a=>{i(a)})})}async function L(e){return await b("handler",e)}async function P(){return await b("stopHandler")}var p=class extends Error{constructor(n){super(n),this.name="SwiftError"}};var r=require("react/jsx-runtime"),v=[{display:"15 seconds",seconds:15,icon:"\u{1FAA5}"},{display:"30 seconds",seconds:30,icon:"\u{1F9FD}"},{display:"1 minute",seconds:60,icon:"\u{1F9FC}"},{display:"2 minutes",seconds:120,icon:"\u{1F6BF}"},{display:"5 minutes",seconds:300,icon:"\u{1F6C1}"},{display:"1 hour",seconds:3600,icon:"\u{1F9F9}"},{display:"24 hours",seconds:86400,icon:"\u{1FAE7}"},{display:"Forever",seconds:1/0,icon:"\u{1F92F}"}];function A(){let[e,n]=(0,f.useState)(!1),[s,l]=(0,f.useState)(null),[i,y]=(0,f.useState)(null),d=t=>{let u=new o.Toast({title:"Keyboard locked"});L(t.seconds),l(t.seconds),y(t.icon),n(!0),u.show()};return(0,f.useEffect)(()=>{let t=setInterval(()=>{e&&s&&(l(s-1),s-1===0&&n(!1))},1e3);return()=>clearInterval(t)},[e,s]),e?(0,r.jsx)(o.List,{children:(0,r.jsx)(o.List.EmptyView,{icon:i??"\u{1F9FC}",description:"Press \u2303 + U at any time to unlock the keyboard.",title:`Cleaning keyboard${s?` for ${s} seconds\u2026`:""}`,actions:(0,r.jsxs)(o.ActionPanel,{children:[(0,r.jsx)(o.Action,{title:"Back",onAction:()=>n(!1)}),(0,r.jsx)(o.Action,{autoFocus:!1,title:"Unlock Keyboard",shortcut:{modifiers:["ctrl"],key:"u"},onAction:()=>{P(),n(!1)}})]})})}):(0,r.jsx)(o.List,{navigationTitle:"Clean Keyboard",searchBarPlaceholder:"Lock keyboard for",children:(0,r.jsx)(o.List.Section,{title:"Durations",children:v.map(t=>(0,r.jsx)(o.List.Item,{title:`${t.display}`,icon:t.icon,actions:(0,r.jsx)(o.ActionPanel,{children:(0,r.jsx)(o.Action,{title:"Lock Keyboard",icon:o.Icon.Lock,onAction:()=>d(t)})})},t.display+t.seconds))})})}
